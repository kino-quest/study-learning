### 23052703

```python
import pandas as pd
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt
import japanize_matplotlib
%matplotlib inline

df = pd.read_excel('SSDSE-E-2023.xlsx', skiprows=2, index_col=1)
df.head()
```
### __Theme.1 棒グラフ__

問題1：
df01にdfから'一般病院数','一般診療所数','総人口','医師数'を抽出して代入しましょう。次にdf01に'人口1万人当り一般病院数'の列を追加し、棒グラフで表示しましょう。figsizeは横20縦6とし、x軸のAxesラベルは'都道府県'をfont12で、Axisラベルは各都道府県名を90度rotationしてfont10で表示しましょう。y軸のAxesラベルは'人口1万人当り一般病院数'をfont12で表示しましょう。

問題2：
df01に'人口1万人当り一般診療所数'の列を追加し、問題１で作成した棒グラフに縦に積み重ねて表示しましょう。凡例を追加し、y軸のAxesラベルは'人口1万人当り一般病院・一般診療所数'に変更しましょう。

問題3： 
df01に'人口1万人当り医師数'の列を追加し、問題2で作成した積層棒グラフを2軸グラフにして折れ線グラフを追加表示しましょう。折れ線グラフにはマーカー('o')を付けましょう。凡例は棒グラフと結合して左上枠内に縦に並べて表示しましょう。

### __Theme.2 散布図__

問題4：
df02にdfから'出生数'と'死亡数'を'全国'を除いて代入し、各都道府県の'出生数'と'死亡数'の関係を散布図に表示しましょう。figsizeは横20縦10、x軸のラベル'出生数'とｙ軸のラベル'死亡数'を各々font16で表示しましょう。

問題5：
問題3で作成した散布図に近似直線を追加しましょう。plotメソッドに適用するdataは、以下のcodeで作成しましょう。近似直線の色は'green'にしましょう。コード中、aが傾き、bが切片です。

```python
a, b, = np.polyfit(df02['出生数'], df02['死亡数'], 1) # 一次直線で近似させた時の傾きaと切片b
func = np.poly1d([a, b])                             # 近似直線を表す関数
data = func(np.arange(0,100000))                     # 近似直線上の分布
```

問題6： 
問題4で表示した散布図の各要素にannotationを追加で表示しましょう。全て表示すると分かりにくくなるので、ここでは近似直線から一定距離(3000以上)離れている要素のみ表示します。距離を計算する関数distanceは以下のコードを使用しましょう。for文とenumerate関数、zip関数を用い、x,y座標で表示される各要素と近似直線との距離を条件にannoteteメソッドで都道府県名を各要素の座標をcenterにfont16のサイズで表示しましょう。
```python
def distance(x, y, a, b): 　　　　# 距離を返す関数 x, yは要素の座標、aは傾きbは切片
    return np.abs(a * x - y + b) / np.sqrt(a**2 + 1)
```

### __Theme.3 円グラフ__
問題7:
df03にdfから'ごみ総排出量（総量）','1人1日当たりの排出量','ごみのリサイクル率'列を、'東京都','愛知県','大阪府','福岡県'のみ抽出して代入し、円グラフを２つ並べて表示しましょう。figsizeは横20,縦10、ax1に'ごみ総排出量（総量）'、ax2に'1人1日当たりの排出量'を表示します。半径はデフォルトの1、ラベルは都道府県名、配色は、東京都から順に、青、緑、オレンジ、赤とし、12時の位置から反時計回り、edgecolorは白とし、パーセント表示は小数点以下1桁で適宜の位置に表示しましょう。最後にタイトルとして各々'主要都市のごみ総排出量（総量）'、'主要都市の1人1日当たりごみ排出量'とfontsize16で表示しましょう。  


問題8：  
問題6で表示した円グラフをドーナツグラフにして、内側に各々'ごみのリサイクル率'を表示しましょう。位置や配色設定は元のグラフと揃えて両者を比較できるようにしましょう。各々ドーナツの厚みを0.3にして、ラベルは外側にだけ表示しましょう。パーセント表示は各々のエリア内に入るよう調整しましょう。最後にタイトルを'主要都市のごみ総排出量（総量）とリサイクル率'、'主要都市の1人1日当りごみ排出量とリサイクル率'に変更しましょう。

### __Theme.4 ヒストグラムと箱ひげ図__

問題9：
df04にdfから、'県内総生産額（平成23年基準）', '県民所得（平成23年基準）'列を抽出して代入し、両者の分布を比較するヒストグラムと箱ひげ図を並べて表示しましょう。figsizeは横20縦6、ax1にヒストグラム、ax2に箱ひげ図を表示します。ヒストグラムは半透明にしましょう。各々の凡例も表示しましょう。箱ひげ図は横に並べて列名をラベル表示しましょう。

問題10：
問題8では分布が大きく偏っているため、対数変換を行ったデータをdf04_logに代入して生データと対数変換したデータの分布を比較してみましょう。対数変換には以下のコードを使用しましょう。
```python
df04_log = np.log(df[['県内総生産額（平成23年基準）', '県民所得（平成23年基準）']])
```
figsizeを横20縦16に設定し、グラフは対数変換を行っていないヒストグラム、箱ひげ図、対数変換を行ったヒストグラム、箱ひげ図の順に縦に4つ並べて表示しましょう。箱ひげ図は横並びから縦並びに変更しましょう。